<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Database</title>
    <script>
        async function searchDatabase() {
            const query = document.getElementById('searchQuery').value;
            const repoOwner = 'AD-Drexen-Zikauni';
            const repoName = 'RobloxGalaxyPlayerInventoriesDatabase';
            const baseURL = `https://api.github.com/repos/${repoOwner}/${repoName}/`;

            // GitHub API call to get contents of the 'database' folder
            const response = await fetch(baseURL);
            const directories = await response.json();

            let found = false;
            let folder = '';
            let file = '';
            let fileContent = '';

            // Loop through directories and check files
            for (const directory of directories) {
                if (directory.type === 'dir') {  // Check if it's a folder
                    const folderName = directory.name;
                    const folderResponse = await fetch(directory.url);
                    const filesInFolder = await folderResponse.json();

                    // Loop through files in the folder
                    for (const fileEntry of filesInFolder) {
                        if (fileEntry.type === 'file' && fileEntry.name.includes(query)) {  // Search file name
                            const fileDataResponse = await fetch(fileEntry.download_url);
                            const fileData = await fileDataResponse.text();

                            found = true;
                            folder = folderName;
                            file = fileEntry.name;
                            fileContent = fileData;
                            break;
                        }
                    }

                    if (found) break;
                }
            }

            // Display results
            if (found) {
                document.getElementById('result').innerHTML = `
                    <h3>File Found:</h3>
                    <p><strong>Folder:</strong> ${folder}</p>
                    <p><strong>File:</strong> ${file}</p>
                    <pre>${fileContent}</pre>
                `;
            } else {
                document.getElementById('result').innerHTML = "<p>No file found for the query.</p>";
            }
        }
    </script>
</head>
<body>
    <h1>Search Database</h1>
    <input type="text" id="searchQuery" placeholder="Enter search string" />
    <button onclick="searchDatabase()">Search</button>

    <div id="result"></div>
</body>
</html>
